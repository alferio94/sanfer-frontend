<mat-card class="chart-card">
  <mat-card-header>
    <mat-icon mat-card-avatar>star_rate</mat-icon>
    <mat-card-title>{{ questionText() }}</mat-card-title>
    <mat-card-subtitle>{{ totalAnswers() }} respuestas</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="rating-summary">
      <div class="average-rating">
        <span class="average-value">{{ stats().average | number : "1.2-2" }}</span>
        <div class="stars-display">
          @for (star of [1, 2, 3, 4, 5]; track star) {
            <mat-icon [class.filled]="star <= stats().average" [class.half]="star > stats().average && star - 1 < stats().average">
              {{ star <= stats().average ? "star" : star - 0.5 <= stats().average ? "star_half" : "star_border" }}
            </mat-icon>
          }
        </div>
        <span class="average-label">Promedio</span>
      </div>

      <div class="rating-range">
        <div class="range-item">
          <mat-icon>arrow_downward</mat-icon>
          <span>Min: {{ stats().min }}</span>
        </div>
        <div class="range-item">
          <mat-icon>arrow_upward</mat-icon>
          <span>Max: {{ stats().max }}</span>
        </div>
      </div>
    </div>

    <div class="chart-container">
      <ngx-charts-bar-horizontal
        [results]="chartData()"
        [xAxis]="true"
        [yAxis]="true"
        [showXAxisLabel]="false"
        [showYAxisLabel]="false"
        [gradient]="true"
        [scheme]="colorScheme"
        [barPadding]="8"
        [roundEdges]="true"
      >
      </ngx-charts-bar-horizontal>
    </div>
  </mat-card-content>
</mat-card>
